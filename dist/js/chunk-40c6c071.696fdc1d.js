(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40c6c071"],{"0211":function(t,a,r){"use strict";r.r(a);var c=function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("b-container",{attrs:{fluid:"sm"}},[r("div",{staticClass:"row"},[t.qtdOcorrenciasAbertas>1?r("div",{staticClass:"col-md-12 text-center",staticStyle:{color:"white","background-color":"red","font-size":"30px"}},[t._v(t._s(t.qtdOcorrenciasAbertas)+" Ocorrências Abertas")]):1==t.qtdOcorrenciasAbertas?r("div",{staticClass:"col-md-12 text-center",staticStyle:{color:"white","background-color":"red","font-size":"30px"}},[t._v(t._s(t.qtdOcorrenciasAbertas)+" Ocorrência Aberta")]):t._e()]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-2"},[r("a",{attrs:{target:"_self",href:"#/funcionarios"}},[t._v("Funcionários")])]),r("div",{staticClass:"col-md-3"},[r("input",{attrs:{type:"checkbox",checked:"",disabled:""}}),t._v(" Ocorrências Abertas")]),r("div",{staticClass:"col-md-3"},[r("label",[r("input",{ref:"filtroAcompanhamento",staticClass:"filtro",attrs:{type:"checkbox"},on:{click:t.consultarOcorrencias}}),t._v(" Em Acompanhamento\n\t\t\t")])]),r("div",{staticClass:"col-md-2"},[r("label",[r("input",{ref:"filtroConcluidas",staticClass:"filtro",attrs:{type:"checkbox"},on:{click:t.consultarOcorrencias}}),t._v(" Concluídas\n\t\t\t")])]),r("div",{staticClass:"col-md-2"},[r("label",[r("input",{ref:"filtroCanceladas",staticClass:"filtro",attrs:{type:"checkbox"},on:{click:t.consultarOcorrencias}}),t._v(" Canceladas\n\t\t\t")])])]),r("div",{ref:"rowOcorrencias",staticClass:"row row-ocorrencias"},[r("div",{staticClass:"col-md-12"},[r("table",{staticClass:"table table-hover",staticStyle:{border:"2px #dadada ridge","font-size":"16px"}},[r("thead",[r("th",[t._v("Ocorrência")]),r("th",[t._v("Local Cadastrado")]),r("th",[t._v("Situação")]),r("th",[t._v("Atendente")]),r("th",[t._v("Última Atualização")]),r("th",[t._v("Ação")])]),r("tbody",t._l(t.ocorrencias,(function(a){return r("tr",{key:a.id,attrs:{id:a.id}},[r("td",{attrs:{width:"150px"}},[r("a",{attrs:{href:""},on:{click:function(r){return t.acompanharOcorrencia(a.id,r)}}},[t._v(t._s(a.id))])]),a.funcionario.escola[0]&&a.funcionario.escola[0].nome?r("td",[t._v(t._s(a.funcionario.escola[0].nome))]):r("td"),r("td",{attrs:{width:"250px"}},[r("a",{attrs:{href:""},on:{click:function(r){return t.acompanharOcorrencia(a.id,r)}}},[t._v(t._s(a.situacaoOcorrencia.descricao))])]),a.usuarioAtendente&&a.usuarioAtendente.nome?r("td",[t._v(" "+t._s(a.usuarioAtendente.nome)+" ")]):r("td"),r("td",[t._v(t._s(a.dataHoraSistemaJSON))]),r("td",{attrs:{width:"100px"}},[1==a.situacaoOcorrencia.id?r("button",{staticClass:"btn btn-primary",on:{click:function(r){return t.acompanharOcorrencia(a.id,r)}}},[t._v("Acompanhar")]):2==a.situacaoOcorrencia.id?r("button",{staticClass:"btn btn-info",on:{click:function(r){return t.acompanharOcorrencia(a.id,r)}}},[t._v("Atualizar")]):r("button",{staticClass:"btn btn-secondary",on:{click:function(r){return t.acompanharOcorrencia(a.id,r)}}},[t._v("Consultar")])])])})),0)])])])])},e=[],o=r("1157"),n=r.n(o),i=r("80ac"),s={data(){return{telaDetalhe:!1,ocorrencias:[],qtdOcorrenciasAbertas:0}},created:async function(){this.consultarQuantidade(),this.atualizarQuantidade(),this.consultarOcorrencias()},methods:{acompanharOcorrencia:function(t,a){a.preventDefault(),this.telaDetalhe=!0,window.open("#/ocorrencia/"+t,"_blank")},atualizarQuantidade:function(){var t=this;setTimeout((function(){t.consultarQuantidade(),t.atualizarQuantidade()}),3e4)},consultarOcorrencias:async function(){var t="";this.$refs.filtroAcompanhamento&&this.$refs.filtroAcompanhamento.checked&&(t+="acompanhamento=true"),this.$refs.filtroConcluidas&&this.$refs.filtroConcluidas.checked&&(""!=t&&(t+="&"),t+="concluida=true"),this.$refs.filtroCanceladas&&this.$refs.filtroCanceladas.checked&&(""!=t&&(t+="&"),t+="cancelada=true"),this.ocorrencias=(await i["a"].listarOcorrencias(t)).data},consultarQuantidade:async function(){var t=(await i["a"].consultarQuantidadeOcorrenciasAbertas()).data;t!==this.qtdOcorrenciasAbertas&&(this.qtdOcorrenciasAbertas=t,this.$refs.rowOcorrencias.style.borderColor=t>0?"red":"black",n()("html").animate({scrollTop:0},"fast"),this.consultarOcorrencias())}}},l=s,d=r("0c7c"),u=Object(d["a"])(l,c,e,!1,null,null,null);a["default"]=u.exports},"80ac":function(t,a,r){"use strict";var c=r("bc3a"),e=r.n(c),o=r("1157"),n=r.n(o);const i=e.a.create({baseURL:window.Config.BASE_URL});a["a"]={acompanharOcorrencia:t=>i.get("ocorrencia/"+t,{headers:{Authorization:"BEARER "+sessionStorage.getItem("token")}}),atualizarOcorrencia(t,a,r){var c="BEARER "+sessionStorage.getItem("token");n.a.ajax({url:window.Config.BASE_URL+"/ocorrencia/"+t,method:"PUT",contentType:"application/json",data:JSON.stringify(a),headers:{authorization:c},global:!1,complete:function(t){r.call(this,!0,t)}})},cancelarOcorrencia:t=>i.post("ocorrencia/"+t+"/cancelar",null,{headers:{Authorization:"BEARER "+sessionStorage.getItem("token")}}),consultarQuantidadeOcorrenciasAbertas(){return i.get("ocorrencia/quantidadeOcorrenciaAberta",{headers:{Authorization:"BEARER "+sessionStorage.getItem("token")}})},encerrarOcorrencia:t=>i.post("ocorrencia/"+t+"/encerrar",null,{headers:{Authorization:"BEARER "+sessionStorage.getItem("token")}}),listarOcorrencias:t=>i.get("ocorrencia?"+t,{headers:{contentType:"application/json",Authorization:"BEARER "+sessionStorage.getItem("token")}})}}}]);
//# sourceMappingURL=chunk-40c6c071.696fdc1d.js.map